(function(){function $(a){return document.getElementById(a)}function goTop(a,b){a=a||0.1;b=b||16;var c=0,dy=0,bx=0,by=0,d=0,wy=0;if(document.documentElement){c=document.documentElement.scrollLeft||0;dy=document.documentElement.scrollTop||0}if(document.body){bx=document.body.scrollLeft||0;by=document.body.scrollTop||0}var d=window.scrollX||0,wy=window.scrollY||0,x=Math.max(d,Math.max(bx,c)),y=Math.max(wy,Math.max(by,dy)),speed=1+a;window.scrollTo(Math.floor(x/speed),Math.floor(y/speed));if(x>0||y>0){var e="istoJS.goTop("+a+","+b+")";window.setTimeout(e,b)}}function loadCommentShortcut(){$('comment').onkeydown=function(a){var b=null;if(window.event){b=window.event}else{b=a}if(b!=null&&b.ctrlKey&&b.keyCode==13){$('submit').click()}}}function goReply(a,b){var c='@'+b+': ',authorcommt;if(document.getElementById('comment')&&document.getElementById('comment').type=='textarea'){authorcommt=document.getElementById('comment')}else{return false}if(document.selection){authorcommt.focus();sel=document.selection.createRange();sel.text=c;authorcommt.focus()}else if(authorcommt.selectionStart||authorcommt.selectionStart=='0'){var d=authorcommt.selectionStart,endPos=authorcommt.selectionEnd,cursorPos=endPos;authorcommt.value=authorcommt.value.substring(0,d)+c+authorcommt.value.substring(endPos,authorcommt.value.length);cursorPos+=c.length;authorcommt.focus();authorcommt.selectionStart=cursorPos;authorcommt.selectionEnd=cursorPos}else{authorcommt.value+=c;authorcommt.focus()}}window['istoJS']={};window['istoJS']['$']=$;window['istoJS']['goTop']=goTop;window['istoJS']['goReply']=goReply;window['istoJS']['loadCommentShortcut']=loadCommentShortcut})();(function(d){istojQ=d.noConflict();var e=[],mouseout_tid=[];istojQ(document).ready(function(){var c=istojQ('#navmenus > li'),$window=istojQ(window),side=istojQ('#aside'),footer=istojQ('footer'),sideoffset=side.offset(),article=istojQ('article'),author=istojQ('input#author'),author_maill=istojQ('input#email'),author_url=istojQ('input#url');c.find('ul:eq(0)').slideUp(50);c.each(function(b){istojQ(this).hover(function(){var a=this;clearTimeout(mouseout_tid[b]);e[b]=setTimeout(function(){istojQ(a).find('ul:eq(0)').slideDown(200);istojQ(a).find('ul:eq(0)').addClass('sub-menu')},200)},function(){var a=this;clearTimeout(e[b]);mouseout_tid[b]=setTimeout(function(){istojQ(a).find('ul:eq(0)').slideUp(200);istojQ(a).find('ul:eq(0)').removeClass('sub-menu')},200)})});istojQ('#comments ul.children li:first-child').addClass('toprep');istojQ('#comments ul.children li:last-child').after('<li class="box-bottom"><span class="left"></span><span class="right"></span></li>');if(localStorage.istojQ_commentform_author){author.val(localStorage.istojQ_commentform_author)}if(localStorage.istojQ_commentform_author){author_maill.val(localStorage.istojQ_commentform_email)}if(localStorage.istojQ_commentform_author){author_url.val(localStorage.istojQ_commentform_url)}author.blur(function(){localStorage.istojQ_commentform_author=istojQ(this).val()});author_maill.blur(function(){localStorage.istojQ_commentform_email=istojQ(this).val()});author_url.blur(function(){localStorage.istojQ_commentform_url=istojQ(this).val()});if(article.outerHeight(true)>side.outerHeight(true)){$window.scroll(function(){var a=$window.scrollTop(),sideHeight=sideoffset.top+side.outerHeight(true)-$window.height(),footeroffset=footer.offset(),footersll=footeroffset.top-$window.height();if(sideHeight<a){side.addClass('fixed').css('left',sideoffset.left+'px')}else{side.removeClass('fixed')}if(a>footersll){side.css('bottom',a-footersll+'px')}else{side.css('bottom','0')}})}})})(jQuery);